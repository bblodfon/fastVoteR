<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rank candidates based on voter preferences — rank_candidates • fastVoteR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rank candidates based on voter preferences — rank_candidates"><meta name="description" content="Calculates a ranking of candidates based on voters' preferences.
Approval-Based Committe (ABC) rules are based on Lackner et al. (2023)."><meta property="og:description" content="Calculates a ranking of candidates based on voters' preferences.
Approval-Based Committe (ABC) rules are based on Lackner et al. (2023)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fastVoteR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Rank candidates based on voter preferences</h1>

      <div class="d-none name"><code>rank_candidates.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates a ranking of candidates based on voters' preferences.
Approval-Based Committe (ABC) rules are based on Lackner et al. (2023).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rank_candidates</span><span class="op">(</span></span>
<span>  <span class="va">voters</span>,</span>
<span>  <span class="va">candidates</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  committee_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"av"</span>,</span>
<span>  borda_score <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  shuffle_candidates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-voters">voters<a class="anchor" aria-label="anchor" href="#arg-voters"></a></dt>
<dd><p>(<code>list</code>) <br>
A list of subsets, where each subset contains the candidates approved or selected by a voter.</p></dd>


<dt id="arg-candidates">candidates<a class="anchor" aria-label="anchor" href="#arg-candidates"></a></dt>
<dd><p>(<code>character</code>) <br>
A vector of all candidates to be ranked.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>(<code>numeric</code>) <br>
A numeric vector of weights representing each voter's influence.
Larger weight, higher influence.
Must have the same length as <code>voters</code>.
If <code>NULL</code> (default), all voters are assigned equal weights of 1, representing equal influence.</p></dd>


<dt id="arg-committee-size">committee_size<a class="anchor" aria-label="anchor" href="#arg-committee-size"></a></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of top candidates to include in the ranking. Default (<code>NULL</code>) includes all candidates.
For sequential methods such as <code>"seq_pav"</code> and <code>"seq_phragmen"</code>, this parameter can speed up computation by limiting the selection process to only the top N candidates, instead of generating a complete ranking.
In other methods (e.g., <code>"sav"</code> or <code>"av"</code>), this parameter simply filters the final output to include only the top N candidates from the complete ranking.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>(<code>character(1)</code>) <br>
The ranking voting method to use. Must be one of: <code>"av"</code>, <code>"sav"</code>, <code>"seq_pav"</code>, <code>"seq_phragmen"</code>.
See Details.</p></dd>


<dt id="arg-borda-score">borda_score<a class="anchor" aria-label="anchor" href="#arg-borda-score"></a></dt>
<dd><p>(<code>logical(1)</code>) <br>
Whether to calculate and include Borda scores in the output. See Details.
Default is <code>TRUE</code>.</p></dd>


<dt id="arg-shuffle-candidates">shuffle_candidates<a class="anchor" aria-label="anchor" href="#arg-shuffle-candidates"></a></dt>
<dd><p>(<code>logical(1)</code>) <br>
Whether to shuffle the candidates randomly before computing the ranking.
Shuffling ensures consistent random tie-breaking across methods and prevents
deterministic biases when candidates with equal scores are encountered.
Default is <code>TRUE</code>. Set to <code>FALSE</code> if deterministic ordering of candidates is preferred.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table::data.table</a> with columns:</p><ul><li><p><code>"candidate"</code>: Candidate names.</p></li>
<li><p><code>"score"</code>: Scores assigned to each candidate based on the selected method (if applicable).</p></li>
<li><p><code>"norm_score"</code>: Normalized scores (if applicable), scaled to the range \([0,1]\), which can be loosely interpreted as <strong>selection probabilities</strong> (see Meinshausen et al. (2010) for an example in Machine Learning research where the goal is to perform stable feature selection).</p></li>
<li><p><code>"borda_score"</code>: Borda scores for method-agnostic comparison, ranging in \([0,1]\), where the top candidate receives a score of 1 and the lowest-ranked candidate receives a score of 0.</p></li>
</ul><p>Candidates are ordered by decreasing <code>"score"</code>, or by <code>"borda_score"</code> if the method returns only rankings.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This method implements several consensus-based ranking methods, where voters express preferences for candidates.
The input framework considers:</p><ul><li><p><strong>Voters</strong>: A list where each element represents the preferences (subsets of candidates) of a single voter.</p></li>
<li><p><strong>Candidates</strong>: A vector of all possible candidates. This vector is shuffled before processing to enforce random tie-breaking across methods.</p></li>
<li><p><strong>Weights</strong>: A numeric vector specifying the <em>influence</em> of each voter. Equal weights indicate all voters contribute equally; different weights can reflect varying voter importance.</p></li>
</ul><p>The following methods are supported for ranking candidates:</p><ul><li><p><code>"av"</code>: <strong>Approval Voting (AV)</strong> ranks candidates based on the number of voters approving them.</p></li>
<li><p><code>"sav"</code>: <strong>Satisfaction Approval Voting (SAV)</strong> ranks candidates by normalizing approval scores based on the size of each voter's approval set.
Voters who approve more candidates contribute a lesser score to the individual approved candidates.</p></li>
<li><p><code>"seq_pav"</code>: <strong>Sequential Proportional Approval Voting (PAV)</strong> builds a committee by iteratively maximizing a proportionality-based satisfaction score.
The <strong>PAV score</strong> is a metric that calculates the weighted sum of harmonic numbers corresponding to the number of elected candidates supported by each voter, reflecting the overall satisfaction of voters in a committee selection process.</p></li>
<li><p><code>"seq_phragmen"</code>: <strong>Sequential Phragmen's Rule</strong> selects candidates to balance voter representation by distributing "loads" evenly.
The rule iteratively selects the candidate that results in the smallest increase in voter load.
This approach is suitable for scenarios where a balanced representation is desired, as it seeks to evenly distribute the "burden" of representation among all voters.</p></li>
</ul><p>All methods have weighted versions which consider voter weights.</p>
<p>To allow for method-agnostic comparisons of rankings, we calculate the <strong>borda scores</strong> for each method as:
$$s_{borda} = (p - i) / (p - 1)$$
where \(p\) is the total number of candidates, and \(i\) is the candidate's rank.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Meinshausen, Nicolai, Buhlmann, Peter (2010).
“Stability Selection.”
<em>Journal of the Royal Statistical Society Series B: Statistical Methodology</em>, <b>72</b>(4), 417–473.
ISSN 1369-7412, <a href="https://doi.org/10.1111/J.1467-9868.2010.00740.X" class="external-link">doi:10.1111/J.1467-9868.2010.00740.X</a>
, 0809.2932.</p>
<p>Lackner, Martin, Skowron, Piotr (2023).
<em>Multi-Winner Voting with Approval Preferences</em>.
Springer Nature.
ISBN 9783031090165, <a href="https://doi.org/10.1007/978-3-031-09016-5" class="external-link">doi:10.1007/978-3-031-09016-5</a>
, 2007.01795.
“</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># 5 candidates</span></span></span>
<span class="r-in"><span><span class="va">candidates</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"V"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 4 voters</span></span></span>
<span class="r-in"><span><span class="va">voters</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V3"</span>, <span class="st">"V1"</span>, <span class="st">"V4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V3"</span>, <span class="st">"V1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V3"</span>, <span class="st">"V2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V2"</span>, <span class="st">"V4"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># voter weights</span></span></span>
<span class="r-in"><span><span class="va">weights</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">2.5</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Approval voting (all voters equal)</span></span></span>
<span class="r-in"><span><span class="fu">rank_candidates</span><span class="op">(</span><span class="va">voters</span>, <span class="va">candidates</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    candidate score norm_score borda_score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt; &lt;num&gt;      &lt;num&gt;       &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        V3     3       0.75        1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        V1     2       0.50        0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        V2     2       0.50        0.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        V4     2       0.50        0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        V5     0       0.00        0.00</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Approval voting (voters unequal)</span></span></span>
<span class="r-in"><span><span class="fu">rank_candidates</span><span class="op">(</span><span class="va">voters</span>, <span class="va">candidates</span>, <span class="va">weights</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    candidate score norm_score borda_score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt; &lt;num&gt;      &lt;num&gt;       &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        V3   4.4  0.8301887        1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        V1   3.6  0.6792453        0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        V4   2.0  0.3773585        0.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        V2   1.7  0.3207547        0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        V5   0.0  0.0000000        0.00</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Satisfaction Approval voting (voters unequal, no borda score)</span></span></span>
<span class="r-in"><span><span class="fu">rank_candidates</span><span class="op">(</span><span class="va">voters</span>, <span class="va">candidates</span>, <span class="va">weights</span>, method <span class="op">=</span> <span class="st">"sav"</span>, borda_score <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    candidate     score norm_score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt;     &lt;num&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        V3 2.0166667  0.8175676</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        V1 1.6166667  0.6554054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        V2 0.8500000  0.3445946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        V4 0.8166667  0.3310811</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        V5 0.0000000  0.0000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sequential Proportional Approval voting (voters equal, no borda score)</span></span></span>
<span class="r-in"><span><span class="fu">rank_candidates</span><span class="op">(</span><span class="va">voters</span>, <span class="va">candidates</span>, method <span class="op">=</span> <span class="st">"seq_pav"</span>, borda_score <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    candidate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        V3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        V4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        V2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        V1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        V5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sequential Phragmen's Rule (voters equal)</span></span></span>
<span class="r-in"><span><span class="fu">rank_candidates</span><span class="op">(</span><span class="va">voters</span>, <span class="va">candidates</span>, method <span class="op">=</span> <span class="st">"seq_phragmen"</span>, borda_score <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    candidate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        V3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        V2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        V1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        V4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:        V5</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Zobolas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

